<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">

    <title>Sistema de Gerenciamento de Livros</title>

  </head>
  
   <body class="bg-light">

    <header>
      <nav class="navbar navbar-expand-lg navbar-dark bg-danger-subtle">
        <div class="container-fluid justify-content-center">
          <span class="navbar-brand mb-0 h1 mx-3 text-gray"> SGBooks - Sistemas de Gerenciamento de Livros </span>
        </div>
      </nav>
    </header>


    <div class="container mt-5">
      <h1 class="mb-4 text-center text-danger">Cadastro de Livros</h1>
            
      
      {% if titulo_livro %}
        <div class="alert alert-success" role="alert">
          <strong>Livro salvo com sucesso!</strong><br>
          <ul class="mb-0">
            <li><strong>Título:</strong> {{ titulo_livro }}</li>
            <li><strong>Autor(a):</strong> {{ autor_livro }}</li>
            <li><strong>Editora:</strong> {{ editora }}</li>
            <li><strong>Ano de Publicação:</strong> {{ ano_publicacao }}</li>
          </ul>
        </div>
      {% endif %}
      

      <div class="card p-4 mb-4 shadow-sm">
          <form action="" method="POST">
            {% csrf_token %}
            <input type="hidden" name="livro_id" value="{{ livro_editar|default:'' }}">


            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label">Título do Livro</label>
                <input type="text" name="titulo" class="form-control" value="{{ titulo_editar.titulo|default:'' }}" required>
              </div>
              <div class="col-md-6">
                <label class="form-label">Autor(a)</label>
                <input type="text" name="autor" class="form-control" value="{{ livro_editar.autor|default:'' }}" required>
              </div>
              <div class="col-md-4">
                <label class="form-label">Ano de Publicação</label>
                <input type="number" name="ano_publicacao" class="form-control" value="{{ livro_editar.ano_publicacao|default:'' }}" required>
              </div>
              <div class="col-md-8">
                <label for="editora" class="form-label">Editora</label>
                <input type="text" name="editora" class="form-control" value="{{ livro_editar.editora|default:'' }}">
              </div>
            </div>
            <div class="mt-3 text-center">
              <button type="submit" class="btn btn-outline-danger">{% if livro_editar %}Salvar Livro{% else %}Adicionar Livro{% endif %}</button>
            </div>
          </form>
        </div>

        <!-- Livros Cadastrados -->
        <div class="card p-4 shadow-sm">
          <h6 class="mb-3">Livros Cadastrados</h6>

          <table class="table table-striped table-hover">
            <tr>
              <th>Título</th>
              <th>Autor(a)</th>
              <th>Ano de Publicação</th>
              <th>Editora</th>
              <th>Ações</th>
            </tr>
            <!--abrir o for-->
            {% for livro in livros %}
              <tr>
                <td>{{ livro.titulo }}</td>
                <td>{{ livro.autor }}</td>
                <td>{{ livro.ano_publicacao }}</td>
                <td>{{ livro.editora }}</td>
                <td>
                  <a href="{% url 'edita_livro' livro.id %}" class="btn btn-sm btn-primary">Editar</a>
                  <a href="{% url 'excluir_livro' livro.id %}" class="btn btn-sm btn-danger" onclick="return confirm('Deseja excluir este livro?')">Excluir</a>
                </td>
              </tr>
            {% empty %}
              <tr>
                <td colspan="5" class="text-center">Nenhum livro cadastrado.</td>
              </tr>
            <!--fechar o for-->
            {% endfor %}
          </table>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
  </body>
</html>